<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>项目申请</title>
	#style
</head>
 <body class="easyui-layout">
 <script type="text/javascript">
 	var winAdd = new Windows("project_add");
	$(function(){
	     initDataGrid();
	     initWindows();
	     
	});
	function initWindows(){
		var winheight = $(window).height()-20;
		
		winAdd.windows({
			title:"申请项目",
			width:1000,
			height:winheight,
			modal:false,
			closed:true,
			iconCls:'icon-role-add' 
		});
		
		
	}
	function sqxm(id){
		winAdd.windows({href:"$!basePath/admin/sport/project/forward/"+id});
		winAdd.windows("open");
	}
	
	function initDataGrid(){
		$('#projectList').datagrid({
				autoRowHeight: false,
				collapsible:true,
				url:'$!basePath/admin/sport/project/list',
				sortName: 'id',
				sortOrder: 'asc',
				remoteSort: true,
				border:false,
				fit:true,
				idField:'id',
				columns:[[
					{field:'name',title:'名称',width:500,align:'center',formatter:function(value,row,index){
						return value;
					}},
					{field:'op',title:'操作',width:100,align:'center',formatter:function(value,row,index){
						var v = "<a href=\"javascript:;\" onClick=\"sqxm('"+row.id+"')\">申请</a>";
						return v;
								}}
				]],
				pagination:true,
				rownumbers:true,
				onDblClickRow:function(rowindex,rowdata){
					winAdd.windows({href:"$!basePath/admin/sport/project/forward/"+rowdata.id});
					winAdd.windows("open");
				}
			});
	}
	 
	 
 </script>
    <div data-options="region:'center',border:true">
		<table id="projectList"></table>
    </div>
  </body>
</html>